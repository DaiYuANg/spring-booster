plugins {
    id 'java'
    id 'org.graalvm.buildtools.native' version "${graalvmPluginVersion}"
}

group = 'org.kop.yodb.server'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

ext {
    smallVersion = "3.2.1"
    logbackVersion = "1.4.6"
    picocliVersion = "4.7.3"
    guiceVersion = "5.1.0"
}

dependencies {
    implementation(project(":modules:yodb:core"))
    implementation "io.smallrye.config:smallrye-config:${smallVersion}"
    implementation "io.smallrye.config:smallrye-config-core:${smallVersion}"
    implementation "io.smallrye.config:smallrye-config-common:${smallVersion}"
    implementation "io.smallrye.config:smallrye-config-source-file-system:${smallVersion}"
    implementation "io.smallrye.config:smallrye-config-source-yaml:${smallVersion}"
    implementation "io.smallrye.config:smallrye-config-validator:${smallVersion}"
    implementation "ch.qos.logback:logback-core:${logbackVersion}"
    implementation "ch.qos.logback:logback-classic:${logbackVersion}"
    implementation "io.netty:netty-all:4.1.91.Final"
    implementation "com.google.inject:guice-parent:${guiceVersion}"
    implementation "info.picocli:picocli:${picocliVersion}"
    annotationProcessor "info.picocli:picocli-codegen:${picocliVersion}"
}

test {
    useJUnitPlatform()
}

graalvmNative {
    binaries {
        main {
            mainClass = 'org.kop.modules.yodb.server.Main'
        }
    }
}

compileJava {
    options.compilerArgs += ["-Aproject=${project.group}/${project.name}"]
}