plugins {
    id 'java'
    id "com.diffplug.spotless" version "${spotlessPluginVersion}"
    id "me.champeau.jmh" version "${jmhPluginVersion}"
    id "io.freefair.lombok" version "${lombokPluginVersion}"
}

group 'org.daiyuang'
version '1.0-SNAPSHOT'

allprojects {
    apply {
        plugin("me.champeau.jmh")
        plugin("io.freefair.lombok")
    }

    repositories {
        mavenLocal()
        gradlePluginPortal()
        mavenCentral()
    }

    dependencies {
        implementation "com.google.code.gson:gson:${gsonVersion}"
        implementation "org.mapstruct:mapstruct:${mapstructVersion}"
        annotationProcessor "org.mapstruct:mapstruct-processor:${mapstructVersion}"
        implementation "org.slf4j:slf4j-api:${slf4jVersion}"
        testImplementation "org.slf4j:slf4j-simple:${slf4jVersion}"
        implementation "io.reactivex.rxjava3:rxjava:${rxjavaVersion}"
        testImplementation platform("org.junit:junit-bom:${junitVersion}")
        testImplementation 'org.junit.jupiter:junit-jupiter'
        testImplementation 'org.junit.jupiter:junit-jupiter-api'
        testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine'
        runtimeOnly "org.aspectj:aspectjrt:${aspectjVersion}"
        implementation "org.aspectj:aspectjtools:${aspectjVersion}"
        runtimeOnly "org.aspectj:aspectjweaver:${aspectjVersion}"
        compileOnly("org.jetbrains:annotations:24.0.1")
    }

    test {
        useJUnitPlatform()
    }
}

spotless {
    java {
        removeUnusedImports()
        importOrder()
        eclipse()
        formatAnnotations()  // fixes formatting of type annotations, see below
        //		licenseHeader '/* (C) $YEAR */'
    }

    groovyGradle {
        target '*.gradle' // default target of groovyGradle
        greclipse().configFile({
            indentWithTabs(2)
        })
    }
}