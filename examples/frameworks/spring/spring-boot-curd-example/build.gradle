plugins {
    id 'org.graalvm.buildtools.native' version "${graalvmPluginVersion}"
}

tasks.publish {
    enabled = false
}

configurations {
    developmentOnly
    runtimeClasspath {
        extendsFrom developmentOnly
    }
}

dependencies {
    implementation(project(":frameworks:spring:spring-boot-starter-async"))
    implementation(project(":frameworks:spring:spring-boot-starter-event"))
    implementation("org.springframework.boot:spring-boot-starter-web") {
    }
    implementation(project(":frameworks:spring:spring-boot-starter-monitor"))
    developmentOnly("org.springframework.boot:spring-boot-devtools")
    implementation(project(":frameworks:spring:spring-boot-starter-authentication"))
    implementation(project(":frameworks:spring:spring-boot-starter-dict"))
    implementation("org.springframework.boot:spring-boot-starter-data-jpa")
    implementation 'org.xerial:sqlite-jdbc:3.42.0.0'
    implementation("org.hibernate.orm:hibernate-community-dialects")
    implementation("com.baomidou:mybatis-plus:3.5.3.1")
    annotationProcessor "org.springframework.boot:spring-boot-configuration-processor"
}

springBoot {
    mainClass = "org.kop.examples.frameworks.spring.curd.example.SpringBootCurdExample"
}

tasks.bootJar {
    duplicatesStrategy = duplicatesStrategy.EXCLUDE
}

nativeBuild {
    mainClass = "org.kop.examples.frameworks.spring.curd.example.SpringBootCurdExample"
}

tasks.publish {
    enabled = false
}