plugins {
    id 'org.graalvm.buildtools.native' version "${graalvmPluginVersion}"
}

tasks.publish {
    enabled = false
}

configurations {
    developmentOnly
    runtimeClasspath {
        extendsFrom developmentOnly
    }
}

dependencies {
    implementation(project(":frameworks:spring:spring-boot-starter-async"))
    implementation(project(":frameworks:spring:spring-boot-starter-event"))
    implementation("org.springframework.boot:spring-boot-starter-web") {
//        exclude module: "spring-boot-starter-tomcat"
    }
//    implementation("org.springframework.boot:spring-boot-starter-websocket")
//    implementation("org.springframework.boot:spring-boot-starter-undertow")
    implementation(project(":frameworks:spring:spring-boot-starter-dev-admin"))
    developmentOnly("org.springframework.boot:spring-boot-devtools")
    implementation(project(":frameworks:spring:spring-boot-starter-authentication"))
    implementation(project(":frameworks:spring:spring-boot-starter-dict"))
    implementation("com.mysql:mysql-connector-j:8.0.33")
    implementation("com.h2database:h2")
    implementation("com.baomidou:mybatis-plus:3.5.3.1")
    annotationProcessor "org.springframework.boot:spring-boot-configuration-processor"
}

springBoot {
    mainClass = "org.kop.examples.frameworks.spring.curd.example.SpringBootCurdExample"
}

tasks.bootJar {
    duplicatesStrategy = duplicatesStrategy.EXCLUDE
}

nativeBuild {
    mainClass = "org.kop.examples.frameworks.spring.curd.example.SpringBootCurdExample"
}

tasks.publish {
    enabled = false
}